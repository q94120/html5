<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <style>
        div .qqwe{
            background-color: red
        }
    </style>
</head>

<body>
    <div>
        <h4 class="qqwe">onchange Event</h4>
    </div>
    <p><a href='https://www.w3schools.com/jsref/event_onchange.asp'>https://www.w3schools.com/jsref/event_onchange.asp</a></p>
    <h4>HTML DOM Input FileUpload Object</h4>
    <p><a href='https://www.w3schools.com/jsref/dom_obj_fileupload.asp'>https://www.w3schools.com/jsref/dom_obj_fileupload.asp</a></p>
    <h4>FileReader</h4>
    <p><a href='https://developer.mozilla.org/en-US/docs/Web/API/FileReader'>https://developer.mozilla.org/en-US/docs/Web/API/FileReader</a></p>
    <h4>在網頁應用程式中使用本地檔案</h4>
    <p><a href='https://developer.mozilla.org/zh-TW/docs/Web/API/File/Using_files_from_web_applications#%E4%BD%BF%E7%94%A8html%E9%81%B8%E6%93%87%E6%9C%AC%E5%9C%B0%E6%AA%94%E6%A1%88'>https://developer.mozilla.org/zh-TW/docs/Web/API/File/Using_files_from_web_applications#%E4%BD%BF%E7%94%A8html%E9%81%B8%E6%93%87%E6%9C%AC%E5%9C%B0%E6%AA%94%E6%A1%88</a></p>

    <h2>文字檔案讀取(單一)</h2>
    <!-- 10. 設計讀取檔案的按鈕和顯示文字的地方 -->
    <input type="file" id="apple">
    <div id="bee">測試</div>
    <script>
        // 20. 偵測到 <input type="file"> 
        // onchange 事件發生時，取得所選的文字檔案
            let apple = document.getElementById("apple");
            let bee = document.getElementById("bee");


            apple.addEventListener('change', function () {
                // console.log('ok 綁定失敗 XD');
                // console.log(apple);
                // console.log(apple.files);
                // console.log(apple.files['0'].name);

                // --------------------------------
                let pika = new FileReader();
                pika.onload = function(){
                    console.log(pika.result);
                    // ['皮卡丘, 男, 0911222333, 台中市', '']
                    // let 某陣列 = result.split(換行);
                    // let 真正的資料 = 某陣列[0].split(',');

                    // 正規表達式
                    // https://zh.wikipedia.org/zh-tw/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F
                    // https://www.w3schools.com/jsref/jsref_obj_regexp.asp
                    // [\S]+  -> 出現一個或多個非空白字符
                    // g       -> 全局匹配
                    // match() -> �����符合的元素並返回結果��列
                    // split(',') -> 根������分隔元素，並返回一個��列
                    // [0]     -> 取出��列的第一個元素，也就是原始文字

                    // match
                    // https? -> ? 左側的字可以出現零次或一次
                    // \/\/   -> 表示
                    let data = pika.result.match(/https:?\/\/[\S]+/g);
                    console.log(data);
                };
                pika.readAsText(apple.files['0']);
            });
        // 25. 透過 new FileReader() 讀取資料並顯示到網頁上
        //      * FileReader.readAsText( Blob | File)
        //      * FileReader.onload
        //      * FileReader.result
    </script>
</body>

</html>